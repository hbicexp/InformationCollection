@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@section scripts {
    <script src="~/Scripts/page.js"></script>
}
@section css {
    <link href="~/Content/font-awesome.css" rel="stylesheet" />
}
<section class="float-left source">
    <hgroup class="title">
        <h3>@ViewBag.Title</h3>
    </hgroup>
    <ul class="nav">
        <li>@Html.ActionLink("最新消息", "Index", "Home", null, new { @class = (ViewBag.Selected == "Index" ? "refresh selected" : "refresh") })</li>
        <li>@Html.ActionLink("关注消息", "Favor", "Home", null, new { @class = (ViewBag.Selected == "Favor" ? "star selected" : "star") })</li>
        <li>@Html.ActionLink("采集任务(添加|配置|删除)", "Source", "Home", null, new { @class = (ViewBag.Selected == "Source" ? "cogwheel selected" : "cogwheel") })</li>
        <li>
            <a class="server_plus @(ViewBag.Selected == "UserAll" ? "server_plus selected":"server_plus" )" href="/Home/UserAll">
                所有消息
                <span id="menu_source" class="submenu-icon down"></span>
            </a>
        </li>
        <li class="t">
            <ul>
                @foreach (TimiSoft.InformationCollection.Models.UserSource source in ViewBag.Sources)
                {
                    <li>@Html.ActionLink((source.SourceName.Length > 10 ? source.SourceName.Substring(0, 9) + ".." : source.SourceName), "Content", "Home", new { Id = source.SourceId }, new { @class = (ViewBag.Selected == source.SourceName ? "tag selected" : "tag") })</li>
                }
            </ul>
        </li>
        @if (User.IsInRole("Administrator"))
        {
            <li><a href="/Admin/" class="cogwheel">系统管理</a></li>
            <li>@Html.ActionLink("所有消息", "All", "Home", null, new { @class = (ViewBag.Selected == "All" ? "list selected" : "list") })</li>
        }
    </ul>
</section>
<script language="javascript" type="text/javascript">
    $(function () {
        var b = $("#menu_source");
        b.click(function () {
            event.preventDefault();
            var n = $(".t");
            if (b.hasClass("up")) {
                b.removeClass("up");
                b.addClass("down");
                n.slideDown(300);
            }
            else {
                b.removeClass("down");
                b.addClass("up");
                n.slideUp(300);
            }
        });
    });
</script>
<section class="float-left sourcecontent">
    @RenderBody()
</section>