@model List<TimiSoft.InformationCollection.Models.UserSource>
@{
    ViewBag.Title = "源管理";
    Layout = "~/Views/Shared/_Content.cshtml";
}

<p class="title">源管理 &nbsp;&nbsp;&nbsp;&nbsp;<a id="btnAddSource" style="font-size:14px">添加源</a></p>

@if (Model == null || Model.Count == 0)
{
    <p>您还没有添加源。</p>
}
else
{
    bool alt = false;
    foreach (var userSource in Model)
    {
        if (alt)
        {
            alt = false;
            <div class="alt">
                <p class="line">@userSource.SourceName [@userSource.CreateTime.ToString("yy-MM-dd HH:MM")] @Html.ActionLink("删除", "DelSource", "Home", new { id = userSource.SourceId }, new { onclick = "return confirm('您确定要删除该源地址吗？')" })</p>
                <p class="line" style="padding-left:50px;"><a href="@userSource.Url">@userSource.Url</a></p>
            </div>
        }
        else
        {
            alt = true;
            <div>
                <p class="line">@userSource.SourceName [@userSource.CreateTime.ToString("yy-MM-dd HH:MM")] @Html.ActionLink("删除", "DelSource", "Home", new { id = userSource.SourceId }, new { onclick = "return confirm('您确定要删除该源地址吗？')" })</p>
                <p class="line" style="padding-left:50px;"><a href="@userSource.Url">@userSource.Url</a></p>
            </div>
        }
    }


    @Html.Partial("_AddSource", new TimiSoft.InformationCollection.Models.UserSource())

    <script language="javascript" type="text/javascript">
        $(function () {
            $("#dialog-form").dialog({
                autoOpen: false,
                height: 328,
                width: 550,
                modal: true,
                buttons: {
                    "添加": function () {
                        $("form").submit();
                    },
                    Cancel: function () {
                        $(this).dialog("close");
                    }
                },
                close: function () {
                    //allFields.val("").removeClass("ui-state-error");
                }
            });

            $("#btnAddSource")
                .button()
                .click(function () {
                    $("#dialog-form").dialog("open");
                });
        });
    </script>
}
